name: Deploy React App to EKS

on:
  push:
    branches:
      - master

      
jobs:
  build-app:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install dependencies
      run: npm install

    - name: Build the application
      run: npm run build

  lint-test:  
   runs-on: ubuntu-latest
   steps:
     - name: Checkout code
       uses: actions/checkout@v2

     - name: Set up Node.js
       uses: actions/setup-node@v2
       with:
         node-version: '16'  # Specify your Node.js version

     - name: Install dependencies
       run: npm install
     
     - name: install eslint
       run: npm install eslint --save-dev

     
     - name: Run ESLint
       run: npx eslint .
       continue-on-error: true

  jest-test:
   runs-on: ubuntu-latest

   steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '18'  # Specify the Node.js version

    - name: Install dependencies
      run: npm install
      


    - name: Run Jest tests
      run: npm test
    - name: 'Test'
